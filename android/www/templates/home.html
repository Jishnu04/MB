<ion-view cache-view="false" view-title="Timeline">
<ion-content>
  <ion-refresher
    pulling-text="Pull to refresh..."
    on-refresh="doRefresh()">
  </ion-refresher>

  <div class="row" style="padding-top:5px">
      <div class="col col-50">
      <button class="button button-balanced  button-full icon ion-android-create" ng-click="postmodal.show();"></button>
    </div>
      <div class="col col-50">
     <button class="button button-calm  button-full icon ion-android-notifications-none">{{notificationCount}}</button>
    </div>
  </div>

    <div class="row">

    <div class="col col-80" style="background-color:  #F5F5DC; padding-left: 20px; padding-top: 10px;" >
      <input type="text" ng-model="searchname" placeholder="Search Pals" >
    </div>
      
    <div class="col col-20">
     <button class="button button-positive icon ion-ios-search" ng-click="searchFor(searchname)"></button>
    </div>

  </div>



 
<!-- Post template -->
<div ng-repeat="bg in BD | orderBy : '-createdAt' | filter: { ownerId : filterObject} | unique :'postId' ">
  <div class="card">
    <div class="item item-divider ">
      <div class="row item-text-wrap">
         {{bg.title  }} {{bg.slno}}
         
      </div>
      
      <div class="row"> 
        <div class="col col-70">
          <h2><font color="green">{{bg.name}}</font></h2>
        </div>
        
        <div class="col col-3 0">
          <p><font size="2pt">{{bg.createdAt | date:'dd/MM/yyyy @ h:mma'}}</font></p>
        </div>
      </div>

      <div class="item  item-text-wrap">
          <div class="item item-input-inset">
            <p ng-text-truncate="bg.body"
   ng-tt-chars-threshold="40" style="color : blue; font-family:Serif"></p>
          </div>
           <p>
            <a class="button button-icon icon ion-thumbsup" ng-click="bg.interest=changestate(bg.postId,bg.interest,1);" id="{{bg.postId}}like" 
                        ng-style="bg.interest === 0 && {'color': 'black'} ||
                  bg.interest=== 1 && {'color': 'red'}||
                  bg.interest=== 2 && {'color': 'black'}"></a>

            <a class="button button-icon icon ion-thumbsdown" ng-click="bg.interest=changestate(bg.postId,bg.interest,0);" id="{{bg.postId}}dislike" 
                         ng-style="bg.interest === 0 && {'color': 'red'} ||
                  bg.interest=== 1 && {'color': 'black'} ||
                  bg.interest=== 2 && {'color': 'black'}"></a>
            <a class="button button-icon icon ion-android-warning" ng-click="reportPost(bg.postId)"></a>
          </p>
      </div>


      <div class="item item-input-inset">
        <label class="item-input-wrapper">
          <input type="text" placeholder="comment here" ng-model="newComment.comment" required="true">
        </label>
          <button class="button button-small  button-calm icon ion-wand" ng-click="submitComment(bg.postId,bg);"></button>
      </div>


      <div class="list list-inset" style=" max-height: 100px; overflow-y:scroll;">

          <div class="item" ng-repeat="cmt in bg.comments  | orderBy : '-createdAt'">
            <p><font size="2pt">{{cmt.comment}}</font></p> 
            <p><font size="2pt" color="green">{{cmt.username}}</font><font size="1pt">-{{cmt.createdAt | date:'dd/MM/yyyy @ h:mma'}}</font></p>
          </div>

      </div>
    
    </div>
  </div>
</div>
<!--end Post template -->

<ion-infinite-scroll
  ng-if="moreDataCanBeLoaded"
  icon="ion-loading-c"
  on-infinite="loadMoreData()">
</ion-infinite-scroll>




   </ion-content>
</ion-view>